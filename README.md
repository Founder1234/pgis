# EzServerClientV7.1 用户手册
&emsp;&emsp;**@EzServerClientV7.1.21.201707170900**

<br/>
## changeLog

><font size=6> EzServerClientV7.1.22.2018003211550</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 增加许可证书验证
&emsp;&emsp; - 新增接口：热点图增加post请求方式（依赖新的代理插件EzProxy）
&emsp;&emsp; - BUG修复：修复热点图渲染后地图拖动异常
</font>

><font size=6> EzServerClientV7.1.21.201707170900</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 新增示例：新增50个开发示例
&emsp;&emsp; - API优化：补充，优化API文档说明
&emsp;&emsp; - BUG修复：修复圆形、多义线、多边形等矢量图形拖拽编辑时不可被拖拽的BUG
</font>

><font size=6> EzServerClientV7.1.20.201705021542</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - BUG修复：修复`Popup`UI中关闭按钮使用a标签时`href='#'`与主流SPA框架（angularjs、reactjs、vuejs）等的路由hash冲突。改用span标签
</font>

><font size=6> EzServerClientV7.1.19.201704211628</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 新增接口：所有矢量叠加要素增加`addTitle`,`showTitle`以及`hideTitle`方法
&emsp;&emsp; - BUG修复：修复`changeDragMode`方法中`editGeometry`类型，关于关闭编辑时报错的问题
</font>

><font size=6> EzServerClientV7.1.18.201703211521</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - BUG修复：修复了切换绘图模式时，DOM提示不删除的BUG
&emsp;&emsp; - 新增接口：`HTMLElementOverLay`增加`show`以及`hide`方法
</font>

><font size=6> EzServerClientV7.1.17.201703021328</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - BUG修复：修复多源热点图层在快速地图缩放时，不断叠加矢量热点的BUG；同时，修复了每次缩放都要请求的问题，减少了AJAX请求数量
</font>

><font size=6> EzServerClientV7.1.16.201701181545</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 功能新增：新增changDrawMode中绘图时候的文字提示
&emsp;&emsp; - 功能新增：新增标绘插件绘图时候的文字提示
&emsp;&emsp; - 功能新增：新增地图`showLayersControl`方法以及`hideLayersControl`方法，用于快速增加和删除图层切换控件
&emsp;&emsp; - 修改BUG：marker的Title在删除marker时不删除的BUG
</font>

><font size=6> EzServerClientV7.1.15</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 功能新增：新增简约版地图缩放控件
&emsp;&emsp; - 功能新增：新增简约版地图图层切换控件
&emsp;&emsp; - 功能新增：新增简约版地图属性标识控件
&emsp;&emsp; - 缺陷修复：修复加载EzMap2010类地图时由于金字塔分辨率偏移导致的地图缩放级别显示不正确的缺陷
&emsp;&emsp; - BUG修复：修改marker的`flash`方法不闪烁的BUG
</font>

><font size=6> EzServerClientV7.1.14</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - BUG修复：修复`Polyline`类中变量map变量名冲突导致的运行异常
&emsp;&emsp; - BUG修复：修复矢量要素中更改某个要素的透明度，所有要素透明度都变化的BUG
&emsp;&emsp; - BUG修复：修复`EzTitle`在marker中隐藏时不会消失的BUG
&emsp;&emsp; - BUG修复：修复`EzTitle`在marker中显示隐藏重复操作时不触发的BUG
&emsp;&emsp; - 新接口：增加`EzMap`类的`getMaxZoom、getMinZoom`方法
</font>

><font size=6> EzServerClientV7.1.13.201610191457</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 增加`group`的EzMapAPI图层类型配置参数，支持前端的图层融合，具体参考EzMapAPI参数说明注释
&emsp;&emsp; - 增加`Ez.Layer.ImageWMS`图层类，支持后端WMS数据服务，支持geoserver，mepserver等标准wms服务；目前，只支持image格式，后续增加瓦片格式
</font>

><font size=6> EzServerClientV7.1.12.201610111548</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - `EzMap`增加启用和停止双击地图缩放交互功能
&emsp;&emsp; - 增加`Ez.TileLayer.WMTS`图层类，用于快速生成遵循`wmts`协议的瓦片服务图层；相应的增加到`EzMapAPI.js`图层的type参数
&emsp;&emsp; - 增加EzMapAPI配置前端图层合并功能，实现客户端的图层融合功能
</font>

><font size=6> EzServerClientV7.1.11.201609261125</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 修复地图测量工具中只能使用`map`作为变量名的bug
&emsp;&emsp; - 更改地图客户端用户权限关键字设置：可以通过`EzMapAPI.js`链接配置用户权限参数。如：`~/EzMapAPI.js?key='你的权限token'`
</font>

><font size=6> EzServerClientV7.1.10.201609071544</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 增加图层的`key`标识用于服务监控
&emsp;&emsp; - 增加基础动画合成系统,其中包括: `ol.animation.Sequence`和`ol.animation.Parallel`串行以及并行动画合成类;`ol.animation.Rotate`和`ol.animation.Translate`要素旋转和平移单轨道动画变换
</font>

><font size=6> EzServerClientV7.1.9.201608240931</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 修改跨域参数`crossOrigin:'anonymous'`为可选参数，解决因为CORS为防止canvas的画布污染而出现的跨域问题
&emsp;&emsp; - 增加`wrapX`图层控制参数，`true`表示连续渲染，0级时候会出现多个地球；`false`表示只渲染一个地球
</font>

><font size=6> EzServerClientV7.1.8.201608091054</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 修改跨域参数`crossOrigin:'anonymous'`为可选参数，解决因为CORS为防止canvas的画布污染而出现的跨域问题
&emsp;&emsp; - 增加了EzPopup的委托事件处理方法，解决了DOM初始化前元素无法绑定事件的缺陷，同时，`stopEvent: true`状态可以使得popup操作不会向上冒泡给地图canvas
&emsp;&emsp; - 增加地图比例尺控件
&emsp;&emsp; - 增加地图类方法:`addScaleLineControl(),removeScaleLineControl()`用于增加与删除比例尺控件
&emsp;&emsp; - 增加地图鹰眼控件
&emsp;&emsp; - 增加地图类方法:`addOverviewControl(),removeOverviewControl()`用于增加与删除鹰眼控件
&emsp;&emsp; - 修改了`Title`类中废弃函数`updatePixelPosition`导致的程序堵塞
</font>

><font size=6> EzServerClientV7.1.7.201607261503</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 增加`EzLayerCluster`类用于生成要素聚类图层
&emsp;&emsp; - 增加跨域参数`crossOrigin:'anonymous'`解决跨域请求被禁止问题
</font>

><font size=6> EzServerClientV7.1.6.201607111654</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 修改`EzMap#changeDragMode`的`type`为`editCircle`的拖拽交互体验
&emsp;&emsp; - 增加`draggable:true`的`EzMarker`类对象的`dragstart`和`dragend`事件类型
&emsp;&emsp; - 矢量要素类增加了`flash`方法，该方法提供一个可选参数`Object`类型。其中，`duration`为整个动画的持续时间；`times`为整个动画的闪烁次数
</font>

><font size=6> EzServerClientV7.1.5.201606301530</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 修改layers控件增加3个以上图层时，不能控制切换图层的BUG
&emsp;&emsp; - 文档增加图层类接口
&emsp;&emsp; - 图层接口`EzTileLayerBase`为图层基类,通过配置参数可以调用不同地图服务商的瓦片
&emsp;&emsp; - 文档增加了多源热点图层接口
&emsp;&emsp; - 注意：热点图层接口类类名有以下变化：`Ez.SingleHotSpot` -> `EzTileLayerSingleHotSpot`以及`Ez.MultiHotSpot` -> `EzTileLayerMultiHotSpot`
&emsp;&emsp; - 注意：热区图层接口类类名有以下变化：`EzHeatMap` -> `EzLayerHeatMap`
&emsp;&emsp; - 新增图层组接口`EzLayerGroup`
&emsp;&emsp; - 新增实例——使用图层组合并图层(注记+图层)
&emsp;&emsp; - 重构EzServerClient实例展示页面,静态文件发布在`newdemos`文件夹中
&emsp;&emsp; - 新增相关图层的API文档
&emsp;&emsp; - 修改Polygon绘制空岛或者多个面时产生的BUG,多个面使用`;`区分
</font>

><font size=6> EzServerClientV7.1.4.201605201517</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 增加了EzCoord类方法--`distanceTo`,用于计算两点之间的距离
&emsp;&emsp; - 修复BUG,`Circle`构造函数中`radius`的单位与map对象的坐标参考单位一致.现在统一为以`meter`为单位
&emsp;&emsp; - 增加`Polyline`,`Polygon`的`getCenter()`方法用于获取要素外包络框的几何中心
&emsp;&emsp; - 重新修复`EzPopup`在初始化和交互情况下打开有偏移的BUG
&emsp;&emsp; - 所有矢量叠加要素添加`getBounds`方法用于获取要素的外包框
&emsp;&emsp; - `EzMBR`类中增加`toBBoxString`方法用于获取序列化后的对角坐标值
&emsp;&emsp; - `Polyline`类中增加`addArrowHead()`方法用于在多义线末端添加箭头
&emsp;&emsp; - `EzMap`类中增加`draggable()`,`disdraggable()`方法用于启动和关闭可拖拽要素的动态拖拽功能
&emsp;&emsp; - `Ez.Event`事件系统中增加`POPUP_OPEN`,`POPUP_CLOSE`事件用于处理泡泡的打开关闭事件处理
&emsp;&emsp; - `changeDragMode`中对测量的绘制样式风格进行调整
&emsp;&emsp; - `EzPopup`重构，修改上一版本需要手动修改css来调整泡泡水平偏移的BUG
&emsp;&emsp; - 修复由测试提交的上一版本`V7.1.3.201604211456`所有问题缺陷
</font>

><font size=6> EzServerClientV7.1.3.201604211456</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 增加地方时坐标系，proj2010
&emsp;&emsp; - 增加测线和测面功能，具体在EzMap类的changeDragMode方法类型——"measureLine","measureArea"
&emsp;&emsp; - 调整EzMapAPI中的地图服务类型控制。目前，每个图层需要指定`type`类型，默认是`天地图`类型，可以缺省
&emsp;&emsp; - 增加一个新参数`indoor`到EzMapAPI中，默认为false。当需要使用两个EzMap对象时，需要设置indoor为true
&emsp;&emsp; - 增加热力图渲染图层组件，用于数据渲染，具体参考API
&emsp;&emsp; - 修改Nodejs部署中由于插件版本问题导致的用户首页不能加载问题
&emsp;&emsp; - 增加EzMap类方法--`getDegree`,用于获取大地坐标下的跨度
</font>

><font size=6> EzServerClientV7.1.2.201603241016</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp; - 升级开发依赖基线OL3版本号3.14.1
&emsp;&emsp; - 移除地图包中所有goog.events.*代码依赖，替代方案为原生Javascript
&emsp;&emsp; - 重构Title类对象，使用canvas的绘制方案。增加Title类对象方法`setOffset()方法`实现运行时期间控制Title与定位点的偏移量，`show()方法`，`hide()方法`用于显示与隐藏Title对象。废弃初始化时的配置参数`paddingV`，改用`lineHeight`，增加初始化配置参数`offset`用于配置Title与定位点的偏移量
&emsp;&emsp; - 重构GPSCOM组件，增加Title的边框背景样式设定；调整其图层渲染方式，提高渲染性能
&emsp;&emsp; - 增加ECHARTS3图层插件，支持对ECHARTS图表的地图支持。目前，支持ECHARTS所有动态表达图，如：迁徙图、动态监测图、炫光图等。图表方面只支持饼状图一种。具体详情查看插件页面
</font>

><font size=6> EzServerClientV7.1.1.201602191016</font>
---
<font size=4 face=微软雅黑 verdana>
&emsp;&emsp;该版本主要覆盖基础的WEBGIS功能,包括: 不同地图服务商瓦片地图的请求,拼接,展现; 基础地图操作: 地图平移、地图缩放; 叠加要素的添加: 矢量要素的添加,Marker叠加要素, POPUP等要素添加; 提供动态的矢量要素绘制功能
&emsp;&emsp; -  ~
</font>

---
智慧城市研发中心 基础GIS产品组